<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">


    <meta name="screen-orientation" content="portrait">
    <meta name="orientation" content="portrait">
    <meta name="theme-color" content="#b91c1c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Chaturvedi Classes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">

    <!-- SEO Meta Tags -->
    <title>Chaturvedi Classes - Learning Platform for 9th to 12th Students</title>
    <meta name="description"
        content="Chaturvedi Classes - Excellence in Education. Learning platform for 9th to 12th students with comprehensive study materials, NCERT books, quizzes, and AI-powered features.">
    <meta name="keywords"
        content="Chaturvedi Classes, education, learning platform, NCERT, 9th class, 10th class, 11th class, 12th class, online classes, study materials">
    <meta name="author" content="Chaturvedi Classes">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="https://chaturvediclasses.com/">


    <!-- Resource Hints for Performance -->
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="dns-prefetch" href="https://unpkg.com">
    <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.gstatic.com">
    <link rel="manifest" href="manifest.json">
    <!-- Preload LCP Image -->
    <link rel="preload" href="img/logo.png" as="image" fetchpriority="high">
    <link rel="icon" type="image/png" sizes="192x192" href="img/logo.png">
    <link rel="icon" type="image/png" sizes="512x512" href="img/logo.png">

    <!-- Preload critical resources -->
    <link rel="preload" href="https://unpkg.com/react@18/umd/react.production.min.js" as="script" crossorigin>
    <link rel="preload" href="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" as="script" crossorigin>
    <link rel="preload" href="https://unpkg.com/@babel/standalone/babel.min.js" as="script" crossorigin>

    <!-- Google Fonts - Preload and use font-display swap -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Theme Initialization Script (Prevents Flash) -->
    <script>
        (function () {
            try {
                const storedTheme = localStorage.getItem('theme');
                const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';

                // If it's the very first time (no stored theme), set it based on system
                if (!storedTheme) {
                    localStorage.setItem('theme', systemTheme);
                }

                const themeToApply = storedTheme || systemTheme;

                if (themeToApply === 'dark') {
                    document.documentElement.classList.add('dark');
                    document.body.classList.add('dark-mode');
                } else {
                    document.documentElement.classList.remove('dark');
                    document.body.classList.remove('dark-mode');
                }
            } catch (e) {
                console.error('Theme initialization error:', e);
            }
        })();
    </script>

    <!-- Inline critical Tailwind utilities to prevent FOUC -->
    <style>
        /* Critical Tailwind utilities - inline to prevent FOUC */
        body {
            margin: 0;
            font-family: Inter, sans-serif
        }

        .min-h-screen {
            min-height: 100vh
        }

        .flex {
            display: flex
        }

        .items-center {
            align-items: center
        }

        .justify-center {
            justify-content: center
        }

        .bg-gradient-to-br {
            background-image: linear-gradient(to bottom right, var(--tw-gradient-stops))
        }

        .from-gray-50 {
            --tw-gradient-from: #f9fafb;
            --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(249, 250, 251, 0))
        }

        .via-red-50 {
            --tw-gradient-stops: var(--tw-gradient-from), #fef2f2, var(--tw-gradient-to, rgba(254, 242, 242, 0))
        }

        .to-yellow-50 {
            --tw-gradient-to: #fefce8
        }

        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem
        }

        .py-8 {
            padding-top: 2rem;
            padding-bottom: 2rem
        }

        .w-full {
            width: 100%
        }

        .max-w-md {
            max-width: 28rem
        }

        .text-center {
            text-align: center
        }

        .mb-8 {
            margin-bottom: 2rem
        }

        .w-24 {
            width: 6rem
        }

        .h-24 {
            height: 6rem
        }

        .rounded-full {
            border-radius: 9999px
        }

        .bg-white {
            background-color: #fff
        }

        .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1)
        }

        .p-1 {
            padding: 0.25rem
        }

        .object-contain {
            object-fit: contain
        }

        .text-3xl {
            font-size: 1.875rem;
            line-height: 2.25rem
        }

        .font-bold {
            font-weight: 700
        }

        .text-red-900 {
            color: #7f1d1d
        }

        .text-yellow-600 {
            color: #ca8a04
        }

        .mb-2 {
            margin-bottom: 0.5rem
        }

        /* Custom styles */
        body {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        ::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Smooth screen transition animations - simplified for better performance */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .view-transition {
            width: 100%;
            min-height: 100vh;
            position: relative;
            animation: fadeIn 0.2s ease-out;
        }

        /* Smooth transitions for interactive elements - reduced complexity */
        button,
        a,
        input,
        select,
        textarea {
            transition: background-color 0.15s ease, color 0.15s ease, transform 0.1s ease;
        }

        /* Premium Mobile UI Enhancements */
        /* Ensure minimum touch target size (44x44px) for better mobile UX */
        button,
        a[role="button"],
        .touch-target {
            min-height: 44px;
            min-width: 44px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        /* Improved button feedback for mobile */
        button:active,
        a:active {
            transform: scale(0.98);
        }

        /* Better spacing for mobile */
        @media (max-width: 640px) {
            .mobile-padding {
                padding-left: 1rem;
                padding-right: 1rem;
            }

            /* Improved card shadows for depth */
            .card-shadow {
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04);
            }
        }

        /* Smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Better focus states for accessibility */
        button:focus-visible,
        a:focus-visible,
        input:focus-visible {
            outline: 2px solid #dc2626;
            outline-offset: 2px;
        }

        /* Dark Mode Support */
        .dark-mode {
            background-color: #111827;
            color: #f9fafb;
        }

        .dark-mode .bg-white {
            background-color: #1f2937;
        }

        .dark-mode .bg-gray-50 {
            background-color: #111827;
        }

        .dark-mode .text-gray-900 {
            color: #f9fafb;
        }

        .dark-mode .text-gray-700 {
            color: #d1d5db;
        }

        .dark-mode .text-gray-600 {
            color: #9ca3af;
        }

        .dark-mode .text-gray-500 {
            color: #6b7280;
        }

        .dark-mode .border-gray-200 {
            border-color: #374151;
        }

        .dark-mode .border-gray-100 {
            border-color: #4b5563;
        }

        .dark-mode .bg-gray-800 {
            background-color: #1f2937;
        }

        .dark-mode .bg-gray-700 {
            background-color: #374151;
        }

        .dark-mode .text-gray-100 {
            color: #f3f4f6;
        }

        .dark-mode .text-gray-200 {
            color: #e5e7eb;
        }

        .dark-mode .text-gray-300 {
            color: #d1d5db;
        }

        .dark-mode .text-gray-400 {
            color: #9ca3af;
        }

        .dark-mode .border-gray-600 {
            border-color: #4b5563;
        }

        .dark-mode .border-gray-700 {
            border-color: #374151;
        }

        .dark-mode .text-red-400 {
            color: #f87171;
        }

        .dark-mode .text-red-700 {
            color: #b91c1c;
        }

        .dark-mode .bg-red-900\/20 {
            background-color: rgba(127, 29, 29, 0.2);
        }

        .dark-mode .bg-red-900\/30 {
            background-color: rgba(127, 29, 29, 0.3);
        }

        .dark-mode .bg-red-900\/40 {
            background-color: rgba(127, 29, 29, 0.4);
        }

        /* Toast and Modal Dark Mode */
        .dark-mode .toast {
            background: #1f2937;
            color: #f9fafb;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        }

        .dark-mode .toast-content {
            color: #f3f4f6;
        }

        .dark-mode .toast-close:hover {
            background: #374151;
            color: #f9fafb;
        }

        .dark-mode .notif-modal {
            background: #1f2937;
            color: #f9fafb;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        .dark-mode .notif-modal-title {
            color: #f9fafb;
        }

        .dark-mode .notif-modal-message {
            color: #9ca3af;
        }

        .dark-mode .notif-modal-icon {
            background: linear-gradient(135deg, #450a0a 0%, #7f1d1d 100%);
        }

        .dark-mode .notif-modal-btn-cancel {
            background: #374151;
            color: #d1d5db;
        }

        .dark-mode .notif-modal-btn-cancel:hover {
            background: #4b5563;
        }

        /* Fix scrolling - only enable where needed for mobile app feel */
        html {
            height: 100%;
            overflow: hidden;
        }

        body {
            height: 100vh;
            overflow: hidden;
            position: fixed;
            width: 100%;
        }

        #root {
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Only allow scrolling in main content areas */
        .home-main-content,
        main.overflow-y-auto,
        .flex-1.overflow-y-auto,
        main[style*="overflow-y"] {
            overflow-y: auto !important;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
            max-height: 100%;
        }

        /* Prevent scrolling on fixed containers */
        .h-screen:not(.overflow-y-auto):not(.home-main-content) {
            overflow: hidden;
        }

        /* Ensure drawer can scroll */
        div[style*="overflowY"] {
            overflow-y: auto !important;
            -webkit-overflow-scrolling: touch;
        }

        /* Mobile App Feel - Remove website-like elements */
        body {
            -webkit-touch-callout: none;
            overscroll-behavior: none;
            touch-action: pan-y;
        }

        /* Hide scrollbars but keep functionality */
        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }

        /* Prevent text selection on mobile for app-like feel */
        @media (max-width: 768px) {
            * {
                -webkit-tap-highlight-color: transparent;
            }
        }

        /* Simple loading spinner */
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .animate-spin {
            animation: spin 0.8s linear infinite;
        }

        /* Reduce motion for users who prefer it */
        @media (prefers-reduced-motion: reduce) {
            .view-transition {
                animation: none;
            }

            button,
            a,
            input,
            select,
            textarea {
                transition: none;
            }

            .animate-spin {
                animation: none;
            }
        }
    </style>

    <!-- Tailwind CSS - Load early to prevent FOUC -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>

    <!-- Critical: Load React production builds (minified for performance) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <!-- Babel is needed to process the JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Firebase SDK - Deferred -->
    <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-auth-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-database-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-messaging-compat.js" defer></script>

    <!-- Supabase SDK - Deferred -->
    <script src="https://unpkg.com/@supabase/supabase-js@2" defer></script>

    <!-- Custom UI Components Styles -->
    <style>
        /* Custom Toast Notification System - Mobile Optimized */
        .toast-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            right: auto;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-width: calc(100% - 32px);
            width: 100%;
            pointer-events: none;
        }

        @media (min-width: 640px) {
            .toast-container {
                left: auto;
                right: 20px;
                transform: none;
                max-width: 400px;
                width: auto;
            }
        }

        .toast {
            background: white;
            border-radius: 12px;
            padding: 14px 18px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideInDown 0.3s ease-out;
            pointer-events: auto;
            border-left: 4px solid #3b82f6;
            min-width: 0;
            width: 100%;
        }

        @media (min-width: 640px) {
            .toast {
                animation: slideInRight 0.3s ease-out;
                min-width: 280px;
                width: auto;
                padding: 16px 20px;
            }
        }

        .toast.success {
            border-left-color: #10b981;
        }

        .toast.error {
            border-left-color: #ef4444;
        }

        .toast.warning {
            border-left-color: #f59e0b;
        }

        .toast.info {
            border-left-color: #3b82f6;
        }

        .toast-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        .toast-content {
            flex: 1;
            font-size: 14px;
            color: #1f2937;
            font-weight: 500;
            line-height: 1.4;
        }

        .toast-close {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            color: #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .toast-close:hover {
            background: #f3f4f6;
            color: #111827;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInDown {
            from {
                transform: translateY(-100%) translateX(-50%);
                opacity: 0;
            }

            to {
                transform: translateY(0) translateX(-50%);
                opacity: 1;
            }
        }

        /* Custom Notification Permission Modal */
        /* Force Mobile App Feel */
        html,
        body {
            background-color: #f9fafb;
            /* Matches bg-gray-50 */
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
        }

        /* Dark mode background match */
        @media (prefers-color-scheme: dark) {

            html,
            body {
                background-color: #111827;
                /* Matches bg-gray-900 */
            }
        }

        /* On larger screens (or desktop mode on mobile), center the app and constrain width */
        @media screen and (min-width: 600px) {
            #root {
                max-width: 480px;
                /* Mobile width constraint */
                margin: 0 auto;
                /* Center the app */
                min-height: 100vh;
                background-color: #fff;
                /* App background */
                box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
                /* Very subtle shadow */
                position: relative;
            }

            /* Dark mode app background */
            @media (prefers-color-scheme: dark) {
                #root {
                    background-color: #111827;
                    /* Matches bg-gray-900 */
                    box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
                }
            }
        }

        .notif-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 10002;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.2s ease-out;
        }

        .notif-modal {
            background: white;
            border-radius: 20px;
            padding: 24px;
            max-width: 420px;
            width: calc(100% - 32px);
            margin: 0 16px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: scaleIn 0.2s ease-out;
            text-align: center;
        }

        @media (min-width: 640px) {
            .notif-modal {
                padding: 28px;
                width: 100%;
                margin: 0;
            }
        }

        .notif-modal-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.15);
        }

        .notif-modal-title {
            font-size: 22px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 12px;
        }

        .notif-modal-message {
            font-size: 15px;
            color: #6b7280;
            margin-bottom: 28px;
            line-height: 1.6;
        }

        .notif-modal-buttons {
            display: flex;
            gap: 12px;
        }

        .notif-modal-btn {
            flex: 1;
            padding: 14px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 15px;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 44px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .notif-modal-btn-cancel {
            background: #f3f4f6;
            color: #374151;
        }

        .notif-modal-btn-cancel:hover {
            background: #e5e7eb;
        }

        .notif-modal-btn-allow {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.25);
        }

        .notif-modal-btn-allow:hover {
            background: linear-gradient(135deg, #b91c1c 0%, #991b1b 100%);
            box-shadow: 0 6px 16px rgba(220, 38, 38, 0.3);
            transform: translateY(-1px);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.95);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>

    <!-- App Configuration and Logic - Deferred -->
    <script src="js/config.js" defer></script>
    <script src="js/utils.js" defer></script>

    <!-- Theme System (Must be loaded before app.js) -->
    <script src="js/theme_system.js"></script>

    <!-- Quiz Questions Data -->
    <script src="js/questions.js"></script>

    <!-- App Logic -->
    <script type="text/babel" src="js/app.js" defer></script>

    <!-- Custom UI Components Script -->
    <script>
        // Custom Toast Notification System
        window.showToast = function (message, type = 'info') {
            let container = document.getElementById('toast-container');
            if (!container) {
                container = document.createElement('div');
                container.id = 'toast-container';
                container.className = 'toast-container';
                document.body.appendChild(container);
            }

            const toast = document.createElement('div');
            toast.className = `toast ${type}`;

            const icons = {
                success: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>',
                error: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>',
                warning: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',
                info: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>'
            };

            toast.innerHTML = `
                <div class="toast-icon">${icons[type] || icons.info}</div>
                <div class="toast-content">${message}</div>
                <button class="toast-close" onclick="this.parentElement.remove()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            `;

            container.appendChild(toast);

            // Auto remove after 4 seconds
            setTimeout(() => {
                if (toast.parentElement) {
                    const isMobile = window.innerWidth < 640;
                    if (isMobile) {
                        toast.style.animation = 'slideInDown 0.3s ease-out reverse';
                        toast.style.transform = 'translateY(-100%) translateX(-50%)';
                    } else {
                        toast.style.animation = 'slideInRight 0.3s ease-out reverse';
                        toast.style.transform = 'translateX(100%)';
                    }
                    setTimeout(() => toast.remove(), 300);
                }
            }, 4000);
        };

        // Custom Notification Permission Modal
        window.showNotificationPermissionModal = function () {
            return new Promise((resolve) => {
                const overlay = document.createElement('div');
                overlay.className = 'notif-modal-overlay';
                overlay.innerHTML = `
                    <div class="notif-modal">
                        <div class="notif-modal-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                            </svg>
                        </div>
                        <div class="notif-modal-title">Enable Notifications</div>
                        <div class="notif-modal-message">
                            Stay updated with important announcements, new videos, and class updates. We'll send you notifications when new content is available.
                        </div>
                        <div class="notif-modal-buttons">
                            <button class="notif-modal-btn notif-modal-btn-cancel">Not Now</button>
                            <button class="notif-modal-btn notif-modal-btn-allow">Allow</button>
                        </div>
                    </div>
                `;

                const cancelBtn = overlay.querySelector('.notif-modal-btn-cancel');
                const allowBtn = overlay.querySelector('.notif-modal-btn-allow');

                const close = (result) => {
                    overlay.style.animation = 'fadeIn 0.2s ease-out reverse';
                    setTimeout(() => overlay.remove(), 200);
                    resolve(result);
                };

                cancelBtn.onclick = () => close(false);
                allowBtn.onclick = () => close(true);
                overlay.onclick = (e) => {
                    if (e.target === overlay) close(false);
                };

                document.body.appendChild(overlay);
            });
        };
    </script>

    <script type="text/babel" src="js/app.js" defer></script>
</head>

<body class="bg-gray-50 text-gray-900 select-none" oncontextmenu="return false;">
    <div id="root" role="main" aria-label="Chaturvedi Classes Application">
        <!-- Static Loading State - improved UI -->
        <div
            class="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 via-red-50 to-yellow-50 px-4 py-8">
            <div class="w-full max-w-md text-center">
                <!-- Logo and Title Section -->
                <div class="flex justify-center mb-6">
                    <div
                        class="w-20 h-20 flex items-center justify-center overflow-hidden bg-white rounded-full shadow-lg p-1.5">
                        <img src="img/logo.png" alt="Chaturvedi Classes Logo" class="w-full h-full object-contain"
                            width="80" height="80" loading="eager" fetchpriority="high" />
                    </div>
                </div>
                <h1 class="text-2xl md:text-3xl font-bold text-red-900 mb-1">
                    Chaturvedi <span class="text-yellow-600">Classes</span>
                </h1>
                <p class="text-xs text-gray-500 font-medium">Excellence in Education</p>
                <!-- Simple loading indicator -->
                <div class="mt-6 flex justify-center">
                    <div class="w-8 h-8 border-3 border-red-200 border-t-red-600 rounded-full animate-spin"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Service Worker Registration - Deferred to end for better performance -->
    <script>
        // Register service worker after everything else loads
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                // Use requestIdleCallback if available, otherwise setTimeout
                const registerSW = function () {
                    navigator.serviceWorker.register('sw.js', { scope: '/' })
                        .then(function (registration) {
                            console.log('Service Worker registered successfully:', registration.scope);

                            // Check for updates
                            registration.addEventListener('updatefound', function () {
                                const newWorker = registration.installing;
                                newWorker.addEventListener('statechange', function () {
                                    if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                        console.log('New service worker available');
                                        // Don't auto-reload, let user continue using the app
                                    }
                                });
                            });
                        })
                        .catch(function (error) {
                            console.log('Service Worker registration failed:', error);
                        });
                };

                if ('requestIdleCallback' in window) {
                    requestIdleCallback(registerSW, { timeout: 2000 });
                } else {
                    setTimeout(registerSW, 2000);
                }

                // Handle service worker updates
                let refreshing = false;
                navigator.serviceWorker.addEventListener('controllerchange', function () {
                    if (!refreshing) {
                        refreshing = true;
                        window.location.reload();
                    }
                });
            });
        }
    </script>
</body>

</html>